name: "Run tests"
on:
  push:
  pull_request:
  workflow_dispatch:

# todo: test for various version inputs

jobs:
  install:
    name: Install only pesde
    runs-on: ubuntu-latest # todo: use a matrix and test for all OS'

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install pesde
        uses: ./

      - name: Test pesde installation
        run: pesde --version

  install-with-lune:
    name: Install pesde with Lune
    runs-on: ubuntu-latest # todo: use a matrix and test for all OS'

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install pesde & Lune
        uses: ./
        with:
          lune-version: latest

      - name: Test pesde installation
        run: |
          pesde --version
          pesde x pesde/hello

      - name: Test Lune installation
        run: |
          lune --version
          echo 'print("Hello, Lune!")' | lune run -
